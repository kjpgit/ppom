@model ppom.Product
@{
    ViewBag.Title = "Patterned Pomegranate: " + Model.Name;
    ViewBag.PageId = "listingPage";
    Layout = "layout.cshtml";
}

<nav class="breadcrumb-nav">
  <a href="/">All Products</a>
  <span class="shop-breadcrumb-separator">&gt;</span>
  <a href="/shop/@Model.Category.Id/">@Model.Category.Name</a>
  <span class="shop-breadcrumb-separator">&gt;</span>
  @Model.Name
</nav>

<div class="row shop-listing">
  <div class="col-md-7 shop-listing-gallery">

    <!-- start gallery -->
    <div class="xzoom-container">
      <div class="xzoom-thumbs">

      @foreach (var img in @ViewBag.Images) {
          <a href="large/@img.Name" data-width=@img.Width data-height=@img.Height><img 
              class="xzoom-gallery" 
              width="80" 
              src="medium/@img.Name"></a>
        }

      </div>

    <img id=listing_main_image 
        class="xzoom img-responsive" 
        src="medium/@ViewBag.Images[0].Name" 
        xoriginal="large/@ViewBag.Images[0].Name">

    </div>
    <!-- end gallery -->

  </div>

  <div class="col-md-5">
    <h1>
      @Model.Name
    </h1>

    @if (@Model.Price > 0) {

      <b class="text-medium">$@Model.Price</b>

      <form onsubmit="myCart.addItem(this); return false;">
        <input type="hidden" name="item-id" value="@Model.Id">
        <input type="hidden" name="item-name" value="@Model.Name">
        <input type="hidden" name="item-price" value="@Model.Price">
        <input type="hidden" name="item-weight" value="@Model.Weight">
        <input type="hidden" name="item-path" value="/shop/listing/@Model.Id/">

        @foreach (var (i, option) in ppom.Extensions.Enumerate(Model.Options)) {
          <span>@option.Label:&nbsp;</span>
          <input type="hidden" class="item-option-name-@i" value="@option.Label">

          @if (option.OptionList == null) {
            <input required type="text" 
                maxlength=190 class="item-option-value-@i" value="">
          } else {
            <select required class="item-option-value-@i">
              <option value="">Choose an Option</option>
              @foreach (var choice in option.OptionList.Values) {
                  <option value="@choice">@choice</option>
              }
            </select>
          }
          <br>
        }

        <span class="">Quantity:&nbsp;</span>
        <input type="number" name="item-quantity" size="4" required min="1" max="999" value="1">
        <br>

        <input type="submit" name="item-submit" value="Add to Cart" class="addCart">
      </form>

    }

    <div class="shop-listing-description">
        @Raw(Model.Description)
    </div>

  </div>
</div>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
